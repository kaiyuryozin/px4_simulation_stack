uorb start
param load

##### system ID num 2 ######
param set MAV_SYS_ID 2

#### common settings ########
param set MAV_TYPE 13
param set SYS_AUTOSTART 6001
param set SYS_RESTART_TYPE 2
param set SYS_MC_EST_GROUP 2
dataman start
param set BAT_N_CELLS 3
param set CAL_GYRO0_ID 2293768
param set CAL_ACC0_ID 1376264
param set CAL_ACC1_ID 1310728
param set CAL_MAG0_ID 196616
param set CAL_GYRO0_XOFF 0.01
param set CAL_GYRO0_YOFF -0.01
param set CAL_GYRO0_ZOFF 0.01
param set CAL_ACC0_XOFF 0.01
param set CAL_ACC0_YOFF -0.01
param set CAL_ACC0_ZOFF 0.01
param set CAL_ACC0_XSCALE 1.01
param set CAL_ACC0_YSCALE 1.01
param set CAL_ACC0_ZSCALE 1.01
param set CAL_ACC1_XOFF 0.01
param set CAL_MAG0_XOFF 0.01
param set SENS_BOARD_ROT 0
param set SENS_BOARD_X_OFF 0.000001
param set COM_RC_IN_MODE 1
param set NAV_RCL_ACT 0
param set NAV_DLL_ACT 0
param set COM_DISARM_LAND 3
param set NAV_ACC_RAD 2.0
param set COM_TAKEOFF_ACT 0
param set RTL_DESCEND_ALT 10.000000000000000000
param set RTL_LAND_DELAY 0.000000000000000000
param set RTL_MIN_DIST 3.0
param set RTL_RETURN_ALT 30.000000000000000000
param set MIS_TAKEOFF_ALT 3.5

########################################

##----------- PORT SETTING------------##
## Rule num1: 14560, num(n): +100      ##

param set SITL_UDP_PRT          14660

#########################################

##----------- PID ------------##
param set MC_ROLL_P 		3
param set MC_PITCH_P		3
param set MC_YAW_P	 		7.5

param set MC_ROLLRATE_P		0.1
param set MC_PITCHRATE_P	0.015
param set MC_YAWRATE_P		0.1

param set MC_ROLLRATE_I		0.003
param set MC_PITCHRATE_I	0.005
param set MC_YAWRATE_I		0

param set MC_ROLLRATE_D		0.0025
param set MC_PITCHRATE_D	0.0015
param set MC_YAWRATE_D		0

param set MC_YAW_FF 		0.01

param set MPC_HOLD_MAX_Z 0.3
param set MPC_Z_VEL_P 0.2
param set MPC_Z_VEL_I 0.05
param set MPC_XY_VEL_P 0.1
param set MPC_XY_VEL_I 0.02
param set EKF2_GBIAS_INIT 0.01
param set EKF2_ANGERR_INIT 0.01
param set EKF2_MAG_TYPE 1
param set EKF2_RNG_A_HMAX 3.000000000000000000
param set SDLOG_DIRS_MAX 0

###### common settings ########
replay tryapplyparams
simulator start -s
tone_alarm start
gyrosim start
accelsim start
barosim start
adcsim start
gpssim start
pwm_out_sim mode_pwm16
sensors start
commander start
land_detector start multicopter
navigator start
attitude_estimator_q start
local_position_estimator start
mc_pos_control start
mc_att_control start
mixer load /dev/pwm_output0 ROMFS/px4fmu_common/mixers/hexa_x.main.mix



####### mavlink settings ########
# 
# rule--- UAV1: default 145xx , UAV2: 146xx 
#
mavlink start -x -u 14656 -r 4000000
mavlink start -x -u 14657 -r 4000000 -m onboard -o      14640
mavlink stream -r 50 -s POSITION_TARGET_LOCAL_NED -u    14656
mavlink stream -r 50 -s LOCAL_POSITION_NED -u           14656
mavlink stream -r 50 -s GLOBAL_POSITION_INT -u          14656
mavlink stream -r 50 -s ATTITUDE -u                     14656
mavlink stream -r 50 -s ATTITUDE_QUATERNION -u          14656
mavlink stream -r 50 -s ATTITUDE_TARGET -u              14656
mavlink stream -r 50 -s SERVO_OUTPUT_RAW_0 -u           14656
mavlink stream -r 20 -s RC_CHANNELS -u                  14656
mavlink stream -r 50 -s HIGHRES_IMU -u                  14656
mavlink stream -r 10 -s OPTICAL_FLOW_RAD -u             14656
logger start -e -t
vmount start
mavlink boot_complete
replay trystart

